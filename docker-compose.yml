services:
  fbclicker:
    build: .
    container_name: fbclicker
    restart: unless-stopped
    env_file:
      - .env
    ports:
      - "8081:8081"
    volumes:
      # Use Docker volume for persistence on remote host
      - fbclicker_data:/app/data
      - fbclicker_cache:/root/.cache
    environment:
      - TZ=Europe/Rome
      - DISPLAY=${DISPLAY:-:0}
      # RIDUCI I BATCH: Questo è il trucco principale per CPU vecchie
      # Default è spesso 32 o 64, che intasa la tua CPU. Mettiamolo basso.
      - DETECTOR_BATCH_SIZE=2
      - RECOGNITION_BATCH_SIZE=4

volumes:
  fbclicker_data:
  fbclicker_cache:
